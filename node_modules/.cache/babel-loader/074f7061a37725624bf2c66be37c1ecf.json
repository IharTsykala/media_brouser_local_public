{"ast":null,"code":"import _slicedToArray from \"/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport React, { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { useMediaIndex, useResponsiveProp } from \"../../hooks\";\nimport { LayerContext } from \"./layerContext\";\n\nfunction LayerProvider(props) {\n  var children = props.children,\n      _props$zOffset = props.zOffset,\n      zOffsetProp = _props$zOffset === void 0 ? 0 : _props$zOffset;\n  var parent = useContext(LayerContext);\n  var zOffset = useResponsiveProp(zOffsetProp);\n  var maxMediaIndex = zOffset.length - 1;\n  var mediaIndex = Math.min(useMediaIndex(), maxMediaIndex);\n  var zIndex = parent ? parent.zIndex + zOffset[mediaIndex] : zOffset[mediaIndex];\n\n  var _useState = useState(0),\n      _useState2 = _slicedToArray(_useState, 2),\n      size = _useState2[0],\n      setSize = _useState2[1];\n\n  var registerChild = useCallback(function () {\n    setSize(function (v) {\n      return v + 1;\n    });\n    return function () {\n      return setSize(function (v) {\n        return v - 1;\n      });\n    };\n  }, []);\n  var parentRegisterChild = parent == null ? void 0 : parent.registerChild;\n  useEffect(function () {\n    if (!parentRegisterChild) return;\n    return parentRegisterChild();\n  }, [parentRegisterChild]);\n  var value = useMemo(function () {\n    return {\n      version: 0,\n      isTopLayer: size === 0,\n      registerChild: registerChild,\n      size: size,\n      zIndex: zIndex\n    };\n  }, [size, registerChild, zIndex]);\n  return /* @__PURE__ */React.createElement(LayerContext.Provider, {\n    value: value\n  }, children);\n}\n\nexport { LayerProvider };","map":{"version":3,"sources":["/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/@sanity/ui/lib/esm/utils/layer/layerProvider.js"],"names":["React","useCallback","useContext","useEffect","useMemo","useState","useMediaIndex","useResponsiveProp","LayerContext","LayerProvider","props","children","zOffset","zOffsetProp","parent","maxMediaIndex","length","mediaIndex","Math","min","zIndex","size","setSize","registerChild","v","parentRegisterChild","value","version","isTopLayer","createElement","Provider"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,UAA7B,EAAyCC,SAAzC,EAAoDC,OAApD,EAA6DC,QAA7D,QAA6E,OAA7E;AACA,SAASC,aAAT,EAAwBC,iBAAxB,QAAiD,aAAjD;AACA,SAASC,YAAT,QAA6B,gBAA7B;;AACA,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAC5B,MAAQC,QAAR,GAA+CD,KAA/C,CAAQC,QAAR;AAAA,uBAA+CD,KAA/C,CAAkBE,OAAlB;AAAA,MAA2BC,WAA3B,+BAAyC,CAAzC;AACA,MAAMC,MAAM,GAAGZ,UAAU,CAACM,YAAD,CAAzB;AACA,MAAMI,OAAO,GAAGL,iBAAiB,CAACM,WAAD,CAAjC;AACA,MAAME,aAAa,GAAGH,OAAO,CAACI,MAAR,GAAiB,CAAvC;AACA,MAAMC,UAAU,GAAGC,IAAI,CAACC,GAAL,CAASb,aAAa,EAAtB,EAA0BS,aAA1B,CAAnB;AACA,MAAMK,MAAM,GAAGN,MAAM,GAAGA,MAAM,CAACM,MAAP,GAAgBR,OAAO,CAACK,UAAD,CAA1B,GAAyCL,OAAO,CAACK,UAAD,CAArE;;AACA,kBAAwBZ,QAAQ,CAAC,CAAD,CAAhC;AAAA;AAAA,MAAOgB,IAAP;AAAA,MAAaC,OAAb;;AACA,MAAMC,aAAa,GAAGtB,WAAW,CAAC,YAAM;AACtCqB,IAAAA,OAAO,CAAC,UAACE,CAAD;AAAA,aAAOA,CAAC,GAAG,CAAX;AAAA,KAAD,CAAP;AACA,WAAO;AAAA,aAAMF,OAAO,CAAC,UAACE,CAAD;AAAA,eAAOA,CAAC,GAAG,CAAX;AAAA,OAAD,CAAb;AAAA,KAAP;AACD,GAHgC,EAG9B,EAH8B,CAAjC;AAIA,MAAMC,mBAAmB,GAAGX,MAAM,IAAI,IAAV,GAAiB,KAAK,CAAtB,GAA0BA,MAAM,CAACS,aAA7D;AACApB,EAAAA,SAAS,CAAC,YAAM;AACd,QAAI,CAACsB,mBAAL,EACE;AACF,WAAOA,mBAAmB,EAA1B;AACD,GAJQ,EAIN,CAACA,mBAAD,CAJM,CAAT;AAKA,MAAMC,KAAK,GAAGtB,OAAO,CAAC;AAAA,WAAO;AAAEuB,MAAAA,OAAO,EAAE,CAAX;AAAcC,MAAAA,UAAU,EAAEP,IAAI,KAAK,CAAnC;AAAsCE,MAAAA,aAAa,EAAbA,aAAtC;AAAqDF,MAAAA,IAAI,EAAJA,IAArD;AAA2DD,MAAAA,MAAM,EAANA;AAA3D,KAAP;AAAA,GAAD,EAA8E,CAACC,IAAD,EAAOE,aAAP,EAAsBH,MAAtB,CAA9E,CAArB;AACA,SAAO,eAAgBpB,KAAK,CAAC6B,aAAN,CAAoBrB,YAAY,CAACsB,QAAjC,EAA2C;AAChEJ,IAAAA,KAAK,EAALA;AADgE,GAA3C,EAEpBf,QAFoB,CAAvB;AAGD;;AACD,SACEF,aADF","sourcesContent":["import React, { useCallback, useContext, useEffect, useMemo, useState } from \"react\";\nimport { useMediaIndex, useResponsiveProp } from \"../../hooks\";\nimport { LayerContext } from \"./layerContext\";\nfunction LayerProvider(props) {\n  const { children, zOffset: zOffsetProp = 0 } = props;\n  const parent = useContext(LayerContext);\n  const zOffset = useResponsiveProp(zOffsetProp);\n  const maxMediaIndex = zOffset.length - 1;\n  const mediaIndex = Math.min(useMediaIndex(), maxMediaIndex);\n  const zIndex = parent ? parent.zIndex + zOffset[mediaIndex] : zOffset[mediaIndex];\n  const [size, setSize] = useState(0);\n  const registerChild = useCallback(() => {\n    setSize((v) => v + 1);\n    return () => setSize((v) => v - 1);\n  }, []);\n  const parentRegisterChild = parent == null ? void 0 : parent.registerChild;\n  useEffect(() => {\n    if (!parentRegisterChild)\n      return;\n    return parentRegisterChild();\n  }, [parentRegisterChild]);\n  const value = useMemo(() => ({ version: 0, isTopLayer: size === 0, registerChild, size, zIndex }), [size, registerChild, zIndex]);\n  return /* @__PURE__ */ React.createElement(LayerContext.Provider, {\n    value\n  }, children);\n}\nexport {\n  LayerProvider\n};\n"]},"metadata":{},"sourceType":"module"}