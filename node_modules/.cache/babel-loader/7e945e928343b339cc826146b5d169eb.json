{"ast":null,"code":"import _slicedToArray from \"/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _taggedTemplateLiteral from \"/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";\nimport _createForOfIteratorHelper from \"/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5, _templateObject6;\n\nvar __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = function __defNormalProp(obj, key, value) {\n  return key in obj ? __defProp(obj, key, {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: value\n  }) : obj[key] = value;\n};\n\nvar __spreadValues = function __spreadValues(a, b) {\n  for (var prop in b || (b = {})) {\n    if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n\n  if (__getOwnPropSymbols) {\n    var _iterator = _createForOfIteratorHelper(__getOwnPropSymbols(b)),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var prop = _step.value;\n        if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  }\n\n  return a;\n};\n\nvar __spreadProps = function __spreadProps(a, b) {\n  return __defProps(a, __getOwnPropDescs(b));\n};\n\nvar __objRest = function __objRest(source, exclude) {\n  var target = {};\n\n  for (var prop in source) {\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n  }\n\n  if (source != null && __getOwnPropSymbols) {\n    var _iterator2 = _createForOfIteratorHelper(__getOwnPropSymbols(source)),\n        _step2;\n\n    try {\n      for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n        var prop = _step2.value;\n        if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n      }\n    } catch (err) {\n      _iterator2.e(err);\n    } finally {\n      _iterator2.f();\n    }\n  }\n\n  return target;\n};\n\nimport { CloseIcon } from \"@sanity/icons\";\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { focusFirstDescendant, focusLastDescendant } from \"../../helpers\";\nimport { useClickOutside, useGlobalKeyDown } from \"../../hooks\";\nimport { Box, Button, Card, Container, Flex, Text } from \"../../primitives\";\nimport { responsivePaddingStyle } from \"../../styles/internal\";\nimport { useTheme } from \"../../theme\";\nimport { Layer, Portal, useLayer } from \"../../utils\";\nimport { dialogStyle, responsiveDialogPositionStyle } from \"./styles\";\nimport { useDialog } from \"./useDialog\";\nvar Root = styled(Layer)(responsivePaddingStyle, dialogStyle, responsiveDialogPositionStyle);\nvar DialogContainer = styled(Container)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  &:not([hidden]) {\\n    display: flex;\\n  }\\n  width: 100%;\\n  height: 100%;\\n  flex-direction: column;\\n  align-items: center;\\n  justify-content: center;\\n\"])));\nvar DialogCardRoot = styled(Card)(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  &:not([hidden]) {\\n    display: flex;\\n  }\\n  width: 100%;\\n  min-height: 0;\\n  max-height: 100%;\\n  overflow: hidden;\\n\"])));\nvar DialogLayout = styled(Flex)(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  flex: 1;\\n  min-height: 0;\\n  width: 100%;\\n\"])));\nvar DialogHeader = styled(Card)(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 2;\\n\\n  &:after {\\n    content: '';\\n    display: block;\\n    position: absolute;\\n    left: 0;\\n    right: 0;\\n    bottom: -1px;\\n    border-bottom: 1px solid var(--card-hairline-soft-color);\\n  }\\n\"])));\nvar DialogContent = styled(Box)(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 1;\\n  overflow: auto;\\n  outline: none;\\n\"])));\nvar DialogFooter = styled(Box)(_templateObject6 || (_templateObject6 = _taggedTemplateLiteral([\"\\n  position: relative;\\n  z-index: 3;\\n  border-top: 1px solid var(--card-hairline-soft-color);\\n\"])));\nvar DialogCard = forwardRef(function DialogCard2(props, ref) {\n  var autoFocus = props.__unstable_autoFocus,\n      hideCloseButton = props.__unstable_hideCloseButton,\n      children = props.children,\n      contentRef = props.contentRef,\n      footer = props.footer,\n      header = props.header,\n      id = props.id,\n      onClickOutside = props.onClickOutside,\n      onClose = props.onClose,\n      radius = props.radius,\n      scheme = props.scheme,\n      shadow = props.shadow,\n      width = props.width;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      rootElement = _useState2[0],\n      setRootElement = _useState2[1];\n\n  var localContentRef = useRef(null);\n  var layer = useLayer();\n  var isTopLayer = layer.isTopLayer;\n  var labelId = \"\".concat(id, \"_label\");\n  var showCloseButton = Boolean(onClose) && hideCloseButton === false;\n  var showHeader = Boolean(header) || showCloseButton;\n  useEffect(function () {\n    if (!autoFocus) return;\n\n    if (localContentRef.current) {\n      focusFirstDescendant(localContentRef.current);\n    }\n  }, [autoFocus]);\n  useGlobalKeyDown(useCallback(function (event) {\n    if (!isTopLayer || !onClose) return;\n\n    if (event.key === \"Escape\") {\n      event.preventDefault();\n      event.stopPropagation();\n      onClose();\n    }\n  }, [isTopLayer, onClose]));\n  useClickOutside(useCallback(function () {\n    if (!isTopLayer || !onClickOutside) return;\n    onClickOutside();\n  }, [isTopLayer, onClickOutside]), [rootElement]);\n  var setRef = useCallback(function (el) {\n    setRootElement(el);\n    if (typeof ref === \"function\") ref(el);else if (ref) ref.current = el;\n  }, [ref]);\n  var setContentRef = useCallback(function (el) {\n    localContentRef.current = el;\n    if (typeof contentRef === \"function\") contentRef(el);else if (contentRef) contentRef.current = el;\n  }, [contentRef]);\n  return /* @__PURE__ */React.createElement(DialogContainer, {\n    \"data-ui\": \"DialogCard\",\n    width: width\n  }, /* @__PURE__ */React.createElement(DialogCardRoot, {\n    radius: radius,\n    ref: setRef,\n    scheme: scheme,\n    shadow: shadow\n  }, /* @__PURE__ */React.createElement(DialogLayout, {\n    direction: \"column\"\n  }, showHeader && /* @__PURE__ */React.createElement(DialogHeader, null, /* @__PURE__ */React.createElement(Flex, null, /* @__PURE__ */React.createElement(Box, {\n    flex: 1,\n    padding: 4\n  }, header && /* @__PURE__ */React.createElement(Text, {\n    id: labelId,\n    weight: \"semibold\"\n  }, header)), showCloseButton && /* @__PURE__ */React.createElement(Box, {\n    padding: 2\n  }, /* @__PURE__ */React.createElement(Button, {\n    \"aria-label\": \"Close dialog\",\n    disabled: !onClose,\n    icon: CloseIcon,\n    mode: \"bleed\",\n    onClick: onClose,\n    padding: 3\n  })))), /* @__PURE__ */React.createElement(DialogContent, {\n    flex: 1,\n    ref: setContentRef,\n    tabIndex: -1\n  }, children), footer && /* @__PURE__ */React.createElement(DialogFooter, null, footer))));\n});\nvar Dialog = forwardRef(function Dialog2(props, ref) {\n  var _a;\n\n  var dialog = useDialog();\n  var theme = useTheme();\n\n  var _b = props,\n      _b$__unstable_autoFoc = _b.__unstable_autoFocus,\n      autoFocus = _b$__unstable_autoFoc === void 0 ? true : _b$__unstable_autoFoc,\n      _b$__unstable_hideClo = _b.__unstable_hideCloseButton,\n      hideCloseButton = _b$__unstable_hideClo === void 0 ? false : _b$__unstable_hideClo,\n      _b$cardRadius = _b.cardRadius,\n      cardRadius = _b$cardRadius === void 0 ? 3 : _b$cardRadius,\n      _b$cardShadow = _b.cardShadow,\n      cardShadow = _b$cardShadow === void 0 ? 4 : _b$cardShadow,\n      children = _b.children,\n      contentRef = _b.contentRef,\n      footer = _b.footer,\n      header = _b.header,\n      id = _b.id,\n      onClickOutside = _b.onClickOutside,\n      onClose = _b.onClose,\n      _b$padding = _b.padding,\n      padding = _b$padding === void 0 ? 4 : _b$padding,\n      _b$position = _b.position,\n      position = _b$position === void 0 ? dialog.position || \"fixed\" : _b$position,\n      scheme = _b.scheme,\n      _b$width = _b.width,\n      width = _b$width === void 0 ? 0 : _b$width,\n      _b$zOffset = _b.zOffset,\n      zOffset = _b$zOffset === void 0 ? dialog.zOffset || ((_a = theme.sanity.layer) == null ? void 0 : _a.dialog.zOffset) : _b$zOffset,\n      restProps = __objRest(_b, [\"__unstable_autoFocus\", \"__unstable_hideCloseButton\", \"cardRadius\", \"cardShadow\", \"children\", \"contentRef\", \"footer\", \"header\", \"id\", \"onClickOutside\", \"onClose\", \"padding\", \"position\", \"scheme\", \"width\", \"zOffset\"]);\n\n  var preDivRef = useRef(null);\n  var postDivRef = useRef(null);\n  var cardRef = useRef(null);\n  var handleFocus = useCallback(function (event) {\n    var target = event.target;\n    var cardElement = cardRef.current;\n\n    if (!cardElement) {\n      return;\n    }\n\n    if (target === preDivRef.current) {\n      focusLastDescendant(cardElement);\n      return;\n    }\n\n    if (target === postDivRef.current) {\n      focusFirstDescendant(cardElement);\n      return;\n    }\n  }, []);\n  var labelId = \"\".concat(id, \"_label\");\n  return /* @__PURE__ */React.createElement(Portal, null, /* @__PURE__ */React.createElement(Root, __spreadProps(__spreadValues({}, restProps), {\n    $padding: padding,\n    $position: position,\n    \"aria-labelledby\": labelId,\n    \"aria-modal\": true,\n    \"data-ui\": \"Dialog\",\n    id: id,\n    onFocus: handleFocus,\n    ref: ref,\n    role: \"dialog\",\n    zOffset: zOffset\n  }), /* @__PURE__ */React.createElement(\"div\", {\n    ref: preDivRef,\n    tabIndex: 0\n  }), /* @__PURE__ */React.createElement(DialogCard, {\n    __unstable_autoFocus: autoFocus,\n    __unstable_hideCloseButton: hideCloseButton,\n    contentRef: contentRef,\n    footer: footer,\n    header: header,\n    id: id,\n    onClickOutside: onClickOutside,\n    onClose: onClose,\n    radius: cardRadius,\n    ref: cardRef,\n    scheme: scheme,\n    shadow: cardShadow,\n    width: width\n  }, children), /* @__PURE__ */React.createElement(\"div\", {\n    ref: postDivRef,\n    tabIndex: 0\n  })));\n});\nexport { Dialog };","map":{"version":3,"sources":["/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/@sanity/ui/lib/esm/components/dialog/dialog.js"],"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__objRest","source","exclude","target","indexOf","CloseIcon","React","forwardRef","useCallback","useEffect","useRef","useState","styled","focusFirstDescendant","focusLastDescendant","useClickOutside","useGlobalKeyDown","Box","Button","Card","Container","Flex","Text","responsivePaddingStyle","useTheme","Layer","Portal","useLayer","dialogStyle","responsiveDialogPositionStyle","useDialog","Root","DialogContainer","DialogCardRoot","DialogLayout","DialogHeader","DialogContent","DialogFooter","DialogCard","DialogCard2","props","ref","autoFocus","__unstable_autoFocus","hideCloseButton","__unstable_hideCloseButton","children","contentRef","footer","header","id","onClickOutside","onClose","radius","scheme","shadow","width","rootElement","setRootElement","localContentRef","layer","isTopLayer","labelId","showCloseButton","Boolean","showHeader","current","event","preventDefault","stopPropagation","setRef","el","setContentRef","createElement","direction","flex","padding","weight","disabled","icon","mode","onClick","tabIndex","Dialog","Dialog2","_a","dialog","theme","_b","cardRadius","cardShadow","position","zOffset","sanity","restProps","preDivRef","postDivRef","cardRef","handleFocus","cardElement","$padding","$position","onFocus","role"],"mappings":"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","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nimport { CloseIcon } from \"@sanity/icons\";\nimport React, { forwardRef, useCallback, useEffect, useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { focusFirstDescendant, focusLastDescendant } from \"../../helpers\";\nimport { useClickOutside, useGlobalKeyDown } from \"../../hooks\";\nimport { Box, Button, Card, Container, Flex, Text } from \"../../primitives\";\nimport { responsivePaddingStyle } from \"../../styles/internal\";\nimport { useTheme } from \"../../theme\";\nimport { Layer, Portal, useLayer } from \"../../utils\";\nimport {\n  dialogStyle,\n  responsiveDialogPositionStyle\n} from \"./styles\";\nimport { useDialog } from \"./useDialog\";\nconst Root = styled(Layer)(responsivePaddingStyle, dialogStyle, responsiveDialogPositionStyle);\nconst DialogContainer = styled(Container)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  width: 100%;\n  height: 100%;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n`;\nconst DialogCardRoot = styled(Card)`\n  &:not([hidden]) {\n    display: flex;\n  }\n  width: 100%;\n  min-height: 0;\n  max-height: 100%;\n  overflow: hidden;\n`;\nconst DialogLayout = styled(Flex)`\n  flex: 1;\n  min-height: 0;\n  width: 100%;\n`;\nconst DialogHeader = styled(Card)`\n  position: relative;\n  z-index: 2;\n\n  &:after {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: -1px;\n    border-bottom: 1px solid var(--card-hairline-soft-color);\n  }\n`;\nconst DialogContent = styled(Box)`\n  position: relative;\n  z-index: 1;\n  overflow: auto;\n  outline: none;\n`;\nconst DialogFooter = styled(Box)`\n  position: relative;\n  z-index: 3;\n  border-top: 1px solid var(--card-hairline-soft-color);\n`;\nconst DialogCard = forwardRef(function DialogCard2(props, ref) {\n  const {\n    __unstable_autoFocus: autoFocus,\n    __unstable_hideCloseButton: hideCloseButton,\n    children,\n    contentRef,\n    footer,\n    header,\n    id,\n    onClickOutside,\n    onClose,\n    radius,\n    scheme,\n    shadow,\n    width\n  } = props;\n  const [rootElement, setRootElement] = useState(null);\n  const localContentRef = useRef(null);\n  const layer = useLayer();\n  const { isTopLayer } = layer;\n  const labelId = `${id}_label`;\n  const showCloseButton = Boolean(onClose) && hideCloseButton === false;\n  const showHeader = Boolean(header) || showCloseButton;\n  useEffect(() => {\n    if (!autoFocus)\n      return;\n    if (localContentRef.current) {\n      focusFirstDescendant(localContentRef.current);\n    }\n  }, [autoFocus]);\n  useGlobalKeyDown(useCallback((event) => {\n    if (!isTopLayer || !onClose)\n      return;\n    if (event.key === \"Escape\") {\n      event.preventDefault();\n      event.stopPropagation();\n      onClose();\n    }\n  }, [isTopLayer, onClose]));\n  useClickOutside(useCallback(() => {\n    if (!isTopLayer || !onClickOutside)\n      return;\n    onClickOutside();\n  }, [isTopLayer, onClickOutside]), [rootElement]);\n  const setRef = useCallback((el) => {\n    setRootElement(el);\n    if (typeof ref === \"function\")\n      ref(el);\n    else if (ref)\n      ref.current = el;\n  }, [ref]);\n  const setContentRef = useCallback((el) => {\n    localContentRef.current = el;\n    if (typeof contentRef === \"function\")\n      contentRef(el);\n    else if (contentRef)\n      contentRef.current = el;\n  }, [contentRef]);\n  return /* @__PURE__ */ React.createElement(DialogContainer, {\n    \"data-ui\": \"DialogCard\",\n    width\n  }, /* @__PURE__ */ React.createElement(DialogCardRoot, {\n    radius,\n    ref: setRef,\n    scheme,\n    shadow\n  }, /* @__PURE__ */ React.createElement(DialogLayout, {\n    direction: \"column\"\n  }, showHeader && /* @__PURE__ */ React.createElement(DialogHeader, null, /* @__PURE__ */ React.createElement(Flex, null, /* @__PURE__ */ React.createElement(Box, {\n    flex: 1,\n    padding: 4\n  }, header && /* @__PURE__ */ React.createElement(Text, {\n    id: labelId,\n    weight: \"semibold\"\n  }, header)), showCloseButton && /* @__PURE__ */ React.createElement(Box, {\n    padding: 2\n  }, /* @__PURE__ */ React.createElement(Button, {\n    \"aria-label\": \"Close dialog\",\n    disabled: !onClose,\n    icon: CloseIcon,\n    mode: \"bleed\",\n    onClick: onClose,\n    padding: 3\n  })))), /* @__PURE__ */ React.createElement(DialogContent, {\n    flex: 1,\n    ref: setContentRef,\n    tabIndex: -1\n  }, children), footer && /* @__PURE__ */ React.createElement(DialogFooter, null, footer))));\n});\nconst Dialog = forwardRef(function Dialog2(props, ref) {\n  var _a;\n  const dialog = useDialog();\n  const theme = useTheme();\n  const _b = props, {\n    __unstable_autoFocus: autoFocus = true,\n    __unstable_hideCloseButton: hideCloseButton = false,\n    cardRadius = 3,\n    cardShadow = 4,\n    children,\n    contentRef,\n    footer,\n    header,\n    id,\n    onClickOutside,\n    onClose,\n    padding = 4,\n    position = dialog.position || \"fixed\",\n    scheme,\n    width = 0,\n    zOffset = dialog.zOffset || ((_a = theme.sanity.layer) == null ? void 0 : _a.dialog.zOffset)\n  } = _b, restProps = __objRest(_b, [\n    \"__unstable_autoFocus\",\n    \"__unstable_hideCloseButton\",\n    \"cardRadius\",\n    \"cardShadow\",\n    \"children\",\n    \"contentRef\",\n    \"footer\",\n    \"header\",\n    \"id\",\n    \"onClickOutside\",\n    \"onClose\",\n    \"padding\",\n    \"position\",\n    \"scheme\",\n    \"width\",\n    \"zOffset\"\n  ]);\n  const preDivRef = useRef(null);\n  const postDivRef = useRef(null);\n  const cardRef = useRef(null);\n  const handleFocus = useCallback((event) => {\n    const target = event.target;\n    const cardElement = cardRef.current;\n    if (!cardElement) {\n      return;\n    }\n    if (target === preDivRef.current) {\n      focusLastDescendant(cardElement);\n      return;\n    }\n    if (target === postDivRef.current) {\n      focusFirstDescendant(cardElement);\n      return;\n    }\n  }, []);\n  const labelId = `${id}_label`;\n  return /* @__PURE__ */ React.createElement(Portal, null, /* @__PURE__ */ React.createElement(Root, __spreadProps(__spreadValues({}, restProps), {\n    $padding: padding,\n    $position: position,\n    \"aria-labelledby\": labelId,\n    \"aria-modal\": true,\n    \"data-ui\": \"Dialog\",\n    id,\n    onFocus: handleFocus,\n    ref,\n    role: \"dialog\",\n    zOffset\n  }), /* @__PURE__ */ React.createElement(\"div\", {\n    ref: preDivRef,\n    tabIndex: 0\n  }), /* @__PURE__ */ React.createElement(DialogCard, {\n    __unstable_autoFocus: autoFocus,\n    __unstable_hideCloseButton: hideCloseButton,\n    contentRef,\n    footer,\n    header,\n    id,\n    onClickOutside,\n    onClose,\n    radius: cardRadius,\n    ref: cardRef,\n    scheme,\n    shadow: cardShadow,\n    width\n  }, children), /* @__PURE__ */ React.createElement(\"div\", {\n    ref: postDivRef,\n    tabIndex: 0\n  })));\n});\nexport {\n  Dialog\n};\n"]},"metadata":{},"sourceType":"module"}