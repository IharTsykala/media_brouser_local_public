{"ast":null,"code":"var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\n\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, {\n  enumerable: true,\n  configurable: true,\n  writable: true,\n  value\n}) : obj[key] = value;\n\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {})) if (__hasOwnProp.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n\n  if (__getOwnPropSymbols) for (var prop of __getOwnPropSymbols(b)) {\n    if (__propIsEnum.call(b, prop)) __defNormalProp(a, prop, b[prop]);\n  }\n  return a;\n};\n\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\n\nvar __objRest = (source, exclude) => {\n  var target = {};\n\n  for (var prop in source) if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0) target[prop] = source[prop];\n\n  if (source != null && __getOwnPropSymbols) for (var prop of __getOwnPropSymbols(source)) {\n    if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop)) target[prop] = source[prop];\n  }\n  return target;\n};\n\nimport { useId } from \"@reach/auto-id\";\nimport { ToggleArrowRightIcon } from \"@sanity/icons\";\nimport React, { createElement, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { Box, Flex, Text } from \"../../primitives\";\nimport { treeItemRootStyle, treeItemRootColorStyle, treeItemBoxStyle } from \"./style\";\nimport { TreeContext } from \"./treeContext\";\nimport { TreeGroup } from \"./treeGroup\";\nimport { useTree } from \"./useTree\";\nconst Root = styled.li(treeItemRootStyle, treeItemRootColorStyle);\nconst TreeItemBox = styled(Box).attrs({\n  forwardedAs: \"a\"\n})(treeItemBoxStyle);\nconst ToggleArrowText = styled(Text)`\n  & > svg {\n    transition: transform 100ms;\n  }\n`;\n\nfunction TreeItem(props) {\n  const _a = props,\n        {\n    children,\n    expanded: expandedProp = false,\n    fontSize,\n    href,\n    icon,\n    id: idProp,\n    muted,\n    onClick,\n    padding = 3,\n    selected = false,\n    space = 2,\n    text,\n    weight\n  } = _a,\n        restProps = __objRest(_a, [\"children\", \"expanded\", \"fontSize\", \"href\", \"icon\", \"id\", \"muted\", \"onClick\", \"padding\", \"selected\", \"space\", \"text\", \"weight\"]);\n\n  const rootRef = useRef(null);\n  const treeitemRef = useRef(null);\n  const tree = useTree();\n  const {\n    path,\n    registerItem,\n    setExpanded,\n    setFocusedElement\n  } = tree;\n  const id = useId(idProp) || idProp;\n  const itemPath = useMemo(() => path.concat([id || \"\"]), [id, path]);\n  const itemKey = itemPath.join(\"/\");\n  const itemState = tree.state[itemKey];\n  const focused = tree.focusedElement === rootRef.current;\n  const expanded = (itemState == null ? void 0 : itemState.expanded) === void 0 ? expandedProp : (itemState == null ? void 0 : itemState.expanded) || false;\n  const tabIndex = tree.focusedElement && tree.focusedElement === rootRef.current ? 0 : -1;\n  const contextValue = useMemo(() => __spreadProps(__spreadValues({}, tree), {\n    level: tree.level + 1,\n    path: itemPath\n  }), [itemPath, tree]);\n  const handleClick = useCallback(event => {\n    if (onClick) onClick(event);\n    const target = event.target;\n\n    if (target instanceof HTMLElement && (target.getAttribute(\"data-ui\") === \"TreeItem__box\" || target.closest('[data-ui=\"TreeItem__box\"]'))) {\n      event.stopPropagation();\n      setExpanded(itemKey, !expanded);\n      setFocusedElement(rootRef.current);\n    }\n  }, [expanded, itemKey, onClick, setExpanded, setFocusedElement]);\n  const handleKeyDown = useCallback(event => {\n    if (focused && event.key === \"Enter\") {\n      const el = treeitemRef.current || rootRef.current;\n      el == null ? void 0 : el.click();\n    }\n  }, [focused]);\n  useEffect(() => {\n    if (!rootRef.current) return;\n    return registerItem(rootRef.current, itemPath.join(\"/\"), expanded, selected);\n  }, [expanded, itemPath, registerItem, selected]);\n  const content = /* @__PURE__ */React.createElement(Flex, {\n    padding\n  }, /* @__PURE__ */React.createElement(Box, {\n    marginRight: space,\n    style: {\n      visibility: icon || children ? \"visible\" : \"hidden\",\n      pointerEvents: \"none\"\n    }\n  }, icon && /* @__PURE__ */React.createElement(Text, {\n    muted,\n    size: fontSize,\n    weight\n  }, createElement(icon)), !icon && /* @__PURE__ */React.createElement(ToggleArrowText, {\n    muted,\n    size: fontSize,\n    weight\n  }, /* @__PURE__ */React.createElement(ToggleArrowRightIcon, {\n    style: {\n      transform: expanded ? \"rotate(90deg)\" : void 0\n    }\n  }))), /* @__PURE__ */React.createElement(Box, {\n    flex: 1\n  }, /* @__PURE__ */React.createElement(Text, {\n    muted,\n    size: fontSize,\n    textOverflow: \"ellipsis\",\n    weight\n  }, text)));\n\n  if (href) {\n    return /* @__PURE__ */React.createElement(Root, __spreadProps(__spreadValues({\n      \"data-selected\": selected ? \"\" : void 0,\n      \"data-tree-id\": id,\n      \"data-tree-key\": itemKey,\n      \"data-ui\": \"TreeItem\"\n    }, restProps), {\n      onClick: handleClick,\n      ref: rootRef,\n      role: \"none\"\n    }), /* @__PURE__ */React.createElement(TreeItemBox, {\n      $level: tree.level,\n      \"aria-expanded\": expanded,\n      \"data-ui\": \"TreeItem__box\",\n      href,\n      ref: treeitemRef,\n      role: \"treeitem\",\n      tabIndex\n    }, content), /* @__PURE__ */React.createElement(TreeContext.Provider, {\n      value: contextValue\n    }, children && /* @__PURE__ */React.createElement(TreeGroup, {\n      hidden: !expanded\n    }, children)));\n  }\n\n  return /* @__PURE__ */React.createElement(Root, __spreadProps(__spreadValues({\n    \"data-selected\": selected ? \"\" : void 0,\n    \"data-ui\": \"TreeItem\",\n    \"data-tree-id\": id,\n    \"data-tree-key\": itemKey\n  }, restProps), {\n    \"aria-expanded\": expanded,\n    onClick: handleClick,\n    onKeyDown: handleKeyDown,\n    ref: rootRef,\n    role: \"treeitem\",\n    tabIndex\n  }), /* @__PURE__ */React.createElement(TreeItemBox, {\n    $level: tree.level,\n    as: \"div\",\n    \"data-ui\": \"TreeItem__box\"\n  }, content), /* @__PURE__ */React.createElement(TreeContext.Provider, {\n    value: contextValue\n  }, children && /* @__PURE__ */React.createElement(TreeGroup, {\n    expanded\n  }, children)));\n}\n\nexport { TreeItem };","map":{"version":3,"sources":["/home/ihartsykala/projects/playy/media_brouser_local_public/node_modules/@sanity/ui/lib/esm/components/tree/treeItem.js"],"names":["__defProp","Object","defineProperty","__defProps","defineProperties","__getOwnPropDescs","getOwnPropertyDescriptors","__getOwnPropSymbols","getOwnPropertySymbols","__hasOwnProp","prototype","hasOwnProperty","__propIsEnum","propertyIsEnumerable","__defNormalProp","obj","key","value","enumerable","configurable","writable","__spreadValues","a","b","prop","call","__spreadProps","__objRest","source","exclude","target","indexOf","useId","ToggleArrowRightIcon","React","createElement","useCallback","useEffect","useMemo","useRef","styled","Box","Flex","Text","treeItemRootStyle","treeItemRootColorStyle","treeItemBoxStyle","TreeContext","TreeGroup","useTree","Root","li","TreeItemBox","attrs","forwardedAs","ToggleArrowText","TreeItem","props","_a","children","expanded","expandedProp","fontSize","href","icon","id","idProp","muted","onClick","padding","selected","space","text","weight","restProps","rootRef","treeitemRef","tree","path","registerItem","setExpanded","setFocusedElement","itemPath","concat","itemKey","join","itemState","state","focused","focusedElement","current","tabIndex","contextValue","level","handleClick","event","HTMLElement","getAttribute","closest","stopPropagation","handleKeyDown","el","click","content","marginRight","style","visibility","pointerEvents","size","transform","flex","textOverflow","ref","role","$level","Provider","hidden","onKeyDown","as"],"mappings":"AAAA,IAAIA,SAAS,GAAGC,MAAM,CAACC,cAAvB;AACA,IAAIC,UAAU,GAAGF,MAAM,CAACG,gBAAxB;AACA,IAAIC,iBAAiB,GAAGJ,MAAM,CAACK,yBAA/B;AACA,IAAIC,mBAAmB,GAAGN,MAAM,CAACO,qBAAjC;AACA,IAAIC,YAAY,GAAGR,MAAM,CAACS,SAAP,CAAiBC,cAApC;AACA,IAAIC,YAAY,GAAGX,MAAM,CAACS,SAAP,CAAiBG,oBAApC;;AACA,IAAIC,eAAe,GAAG,CAACC,GAAD,EAAMC,GAAN,EAAWC,KAAX,KAAqBD,GAAG,IAAID,GAAP,GAAaf,SAAS,CAACe,GAAD,EAAMC,GAAN,EAAW;AAAEE,EAAAA,UAAU,EAAE,IAAd;AAAoBC,EAAAA,YAAY,EAAE,IAAlC;AAAwCC,EAAAA,QAAQ,EAAE,IAAlD;AAAwDH,EAAAA;AAAxD,CAAX,CAAtB,GAAoGF,GAAG,CAACC,GAAD,CAAH,GAAWC,KAA1J;;AACA,IAAII,cAAc,GAAG,CAACC,CAAD,EAAIC,CAAJ,KAAU;AAC7B,OAAK,IAAIC,IAAT,IAAiBD,CAAC,KAAKA,CAAC,GAAG,EAAT,CAAlB,EACE,IAAId,YAAY,CAACgB,IAAb,CAAkBF,CAAlB,EAAqBC,IAArB,CAAJ,EACEV,eAAe,CAACQ,CAAD,EAAIE,IAAJ,EAAUD,CAAC,CAACC,IAAD,CAAX,CAAf;;AACJ,MAAIjB,mBAAJ,EACE,KAAK,IAAIiB,IAAT,IAAiBjB,mBAAmB,CAACgB,CAAD,CAApC,EAAyC;AACvC,QAAIX,YAAY,CAACa,IAAb,CAAkBF,CAAlB,EAAqBC,IAArB,CAAJ,EACEV,eAAe,CAACQ,CAAD,EAAIE,IAAJ,EAAUD,CAAC,CAACC,IAAD,CAAX,CAAf;AACH;AACH,SAAOF,CAAP;AACD,CAVD;;AAWA,IAAII,aAAa,GAAG,CAACJ,CAAD,EAAIC,CAAJ,KAAUpB,UAAU,CAACmB,CAAD,EAAIjB,iBAAiB,CAACkB,CAAD,CAArB,CAAxC;;AACA,IAAII,SAAS,GAAG,CAACC,MAAD,EAASC,OAAT,KAAqB;AACnC,MAAIC,MAAM,GAAG,EAAb;;AACA,OAAK,IAAIN,IAAT,IAAiBI,MAAjB,EACE,IAAInB,YAAY,CAACgB,IAAb,CAAkBG,MAAlB,EAA0BJ,IAA1B,KAAmCK,OAAO,CAACE,OAAR,CAAgBP,IAAhB,IAAwB,CAA/D,EACEM,MAAM,CAACN,IAAD,CAAN,GAAeI,MAAM,CAACJ,IAAD,CAArB;;AACJ,MAAII,MAAM,IAAI,IAAV,IAAkBrB,mBAAtB,EACE,KAAK,IAAIiB,IAAT,IAAiBjB,mBAAmB,CAACqB,MAAD,CAApC,EAA8C;AAC5C,QAAIC,OAAO,CAACE,OAAR,CAAgBP,IAAhB,IAAwB,CAAxB,IAA6BZ,YAAY,CAACa,IAAb,CAAkBG,MAAlB,EAA0BJ,IAA1B,CAAjC,EACEM,MAAM,CAACN,IAAD,CAAN,GAAeI,MAAM,CAACJ,IAAD,CAArB;AACH;AACH,SAAOM,MAAP;AACD,CAXD;;AAYA,SAASE,KAAT,QAAsB,gBAAtB;AACA,SAASC,oBAAT,QAAqC,eAArC;AACA,OAAOC,KAAP,IAAgBC,aAAhB,EAA+BC,WAA/B,EAA4CC,SAA5C,EAAuDC,OAAvD,EAAgEC,MAAhE,QAA8E,OAA9E;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,GAAT,EAAcC,IAAd,EAAoBC,IAApB,QAAgC,kBAAhC;AACA,SACEC,iBADF,EAEEC,sBAFF,EAGEC,gBAHF,QAIO,SAJP;AAKA,SAASC,WAAT,QAA4B,eAA5B;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,OAAT,QAAwB,WAAxB;AACA,MAAMC,IAAI,GAAGV,MAAM,CAACW,EAAP,CAAUP,iBAAV,EAA6BC,sBAA7B,CAAb;AACA,MAAMO,WAAW,GAAGZ,MAAM,CAACC,GAAD,CAAN,CAAYY,KAAZ,CAAkB;AAAEC,EAAAA,WAAW,EAAE;AAAf,CAAlB,EAAwCR,gBAAxC,CAApB;AACA,MAAMS,eAAe,GAAGf,MAAM,CAACG,IAAD,CAAO;AACrC;AACA;AACA;AACA,CAJA;;AAKA,SAASa,QAAT,CAAkBC,KAAlB,EAAyB;AACvB,QAAMC,EAAE,GAAGD,KAAX;AAAA,QAAkB;AAChBE,IAAAA,QADgB;AAEhBC,IAAAA,QAAQ,EAAEC,YAAY,GAAG,KAFT;AAGhBC,IAAAA,QAHgB;AAIhBC,IAAAA,IAJgB;AAKhBC,IAAAA,IALgB;AAMhBC,IAAAA,EAAE,EAAEC,MANY;AAOhBC,IAAAA,KAPgB;AAQhBC,IAAAA,OARgB;AAShBC,IAAAA,OAAO,GAAG,CATM;AAUhBC,IAAAA,QAAQ,GAAG,KAVK;AAWhBC,IAAAA,KAAK,GAAG,CAXQ;AAYhBC,IAAAA,IAZgB;AAahBC,IAAAA;AAbgB,MAcdf,EAdJ;AAAA,QAcQgB,SAAS,GAAG/C,SAAS,CAAC+B,EAAD,EAAK,CAChC,UADgC,EAEhC,UAFgC,EAGhC,UAHgC,EAIhC,MAJgC,EAKhC,MALgC,EAMhC,IANgC,EAOhC,OAPgC,EAQhC,SARgC,EAShC,SATgC,EAUhC,UAVgC,EAWhC,OAXgC,EAYhC,MAZgC,EAahC,QAbgC,CAAL,CAd7B;;AA6BA,QAAMiB,OAAO,GAAGpC,MAAM,CAAC,IAAD,CAAtB;AACA,QAAMqC,WAAW,GAAGrC,MAAM,CAAC,IAAD,CAA1B;AACA,QAAMsC,IAAI,GAAG5B,OAAO,EAApB;AACA,QAAM;AAAE6B,IAAAA,IAAF;AAAQC,IAAAA,YAAR;AAAsBC,IAAAA,WAAtB;AAAmCC,IAAAA;AAAnC,MAAyDJ,IAA/D;AACA,QAAMZ,EAAE,GAAGjC,KAAK,CAACkC,MAAD,CAAL,IAAiBA,MAA5B;AACA,QAAMgB,QAAQ,GAAG5C,OAAO,CAAC,MAAMwC,IAAI,CAACK,MAAL,CAAY,CAAClB,EAAE,IAAI,EAAP,CAAZ,CAAP,EAAgC,CAACA,EAAD,EAAKa,IAAL,CAAhC,CAAxB;AACA,QAAMM,OAAO,GAAGF,QAAQ,CAACG,IAAT,CAAc,GAAd,CAAhB;AACA,QAAMC,SAAS,GAAGT,IAAI,CAACU,KAAL,CAAWH,OAAX,CAAlB;AACA,QAAMI,OAAO,GAAGX,IAAI,CAACY,cAAL,KAAwBd,OAAO,CAACe,OAAhD;AACA,QAAM9B,QAAQ,GAAG,CAAC0B,SAAS,IAAI,IAAb,GAAoB,KAAK,CAAzB,GAA6BA,SAAS,CAAC1B,QAAxC,MAAsD,KAAK,CAA3D,GAA+DC,YAA/D,GAA8E,CAACyB,SAAS,IAAI,IAAb,GAAoB,KAAK,CAAzB,GAA6BA,SAAS,CAAC1B,QAAxC,KAAqD,KAApJ;AACA,QAAM+B,QAAQ,GAAGd,IAAI,CAACY,cAAL,IAAuBZ,IAAI,CAACY,cAAL,KAAwBd,OAAO,CAACe,OAAvD,GAAiE,CAAjE,GAAqE,CAAC,CAAvF;AACA,QAAME,YAAY,GAAGtD,OAAO,CAAC,MAAMZ,aAAa,CAACL,cAAc,CAAC,EAAD,EAAKwD,IAAL,CAAf,EAA2B;AAAEgB,IAAAA,KAAK,EAAEhB,IAAI,CAACgB,KAAL,GAAa,CAAtB;AAAyBf,IAAAA,IAAI,EAAEI;AAA/B,GAA3B,CAApB,EAA2F,CAACA,QAAD,EAAWL,IAAX,CAA3F,CAA5B;AACA,QAAMiB,WAAW,GAAG1D,WAAW,CAAE2D,KAAD,IAAW;AACzC,QAAI3B,OAAJ,EACEA,OAAO,CAAC2B,KAAD,CAAP;AACF,UAAMjE,MAAM,GAAGiE,KAAK,CAACjE,MAArB;;AACA,QAAIA,MAAM,YAAYkE,WAAlB,KAAkClE,MAAM,CAACmE,YAAP,CAAoB,SAApB,MAAmC,eAAnC,IAAsDnE,MAAM,CAACoE,OAAP,CAAe,2BAAf,CAAxF,CAAJ,EAA0I;AACxIH,MAAAA,KAAK,CAACI,eAAN;AACAnB,MAAAA,WAAW,CAACI,OAAD,EAAU,CAACxB,QAAX,CAAX;AACAqB,MAAAA,iBAAiB,CAACN,OAAO,CAACe,OAAT,CAAjB;AACD;AACF,GAT8B,EAS5B,CAAC9B,QAAD,EAAWwB,OAAX,EAAoBhB,OAApB,EAA6BY,WAA7B,EAA0CC,iBAA1C,CAT4B,CAA/B;AAUA,QAAMmB,aAAa,GAAGhE,WAAW,CAAE2D,KAAD,IAAW;AAC3C,QAAIP,OAAO,IAAIO,KAAK,CAAC/E,GAAN,KAAc,OAA7B,EAAsC;AACpC,YAAMqF,EAAE,GAAGzB,WAAW,CAACc,OAAZ,IAAuBf,OAAO,CAACe,OAA1C;AACAW,MAAAA,EAAE,IAAI,IAAN,GAAa,KAAK,CAAlB,GAAsBA,EAAE,CAACC,KAAH,EAAtB;AACD;AACF,GALgC,EAK9B,CAACd,OAAD,CAL8B,CAAjC;AAMAnD,EAAAA,SAAS,CAAC,MAAM;AACd,QAAI,CAACsC,OAAO,CAACe,OAAb,EACE;AACF,WAAOX,YAAY,CAACJ,OAAO,CAACe,OAAT,EAAkBR,QAAQ,CAACG,IAAT,CAAc,GAAd,CAAlB,EAAsCzB,QAAtC,EAAgDU,QAAhD,CAAnB;AACD,GAJQ,EAIN,CAACV,QAAD,EAAWsB,QAAX,EAAqBH,YAArB,EAAmCT,QAAnC,CAJM,CAAT;AAKA,QAAMiC,OAAO,GAAG,eAAgBrE,KAAK,CAACC,aAAN,CAAoBO,IAApB,EAA0B;AACxD2B,IAAAA;AADwD,GAA1B,EAE7B,eAAgBnC,KAAK,CAACC,aAAN,CAAoBM,GAApB,EAAyB;AAC1C+D,IAAAA,WAAW,EAAEjC,KAD6B;AAE1CkC,IAAAA,KAAK,EAAE;AAAEC,MAAAA,UAAU,EAAE1C,IAAI,IAAIL,QAAR,GAAmB,SAAnB,GAA+B,QAA7C;AAAuDgD,MAAAA,aAAa,EAAE;AAAtE;AAFmC,GAAzB,EAGhB3C,IAAI,IAAI,eAAgB9B,KAAK,CAACC,aAAN,CAAoBQ,IAApB,EAA0B;AACnDwB,IAAAA,KADmD;AAEnDyC,IAAAA,IAAI,EAAE9C,QAF6C;AAGnDW,IAAAA;AAHmD,GAA1B,EAIxBtC,aAAa,CAAC6B,IAAD,CAJW,CAHR,EAOM,CAACA,IAAD,IAAS,eAAgB9B,KAAK,CAACC,aAAN,CAAoBoB,eAApB,EAAqC;AACrFY,IAAAA,KADqF;AAErFyC,IAAAA,IAAI,EAAE9C,QAF+E;AAGrFW,IAAAA;AAHqF,GAArC,EAI/C,eAAgBvC,KAAK,CAACC,aAAN,CAAoBF,oBAApB,EAA0C;AAC3DwE,IAAAA,KAAK,EAAE;AAAEI,MAAAA,SAAS,EAAEjD,QAAQ,GAAG,eAAH,GAAqB,KAAK;AAA/C;AADoD,GAA1C,CAJ+B,CAP/B,CAFa,EAe1B,eAAgB1B,KAAK,CAACC,aAAN,CAAoBM,GAApB,EAAyB;AAC7CqE,IAAAA,IAAI,EAAE;AADuC,GAAzB,EAEnB,eAAgB5E,KAAK,CAACC,aAAN,CAAoBQ,IAApB,EAA0B;AAC3CwB,IAAAA,KAD2C;AAE3CyC,IAAAA,IAAI,EAAE9C,QAFqC;AAG3CiD,IAAAA,YAAY,EAAE,UAH6B;AAI3CtC,IAAAA;AAJ2C,GAA1B,EAKhBD,IALgB,CAFG,CAfU,CAAhC;;AAuBA,MAAIT,IAAJ,EAAU;AACR,WAAO,eAAgB7B,KAAK,CAACC,aAAN,CAAoBe,IAApB,EAA0BxB,aAAa,CAACL,cAAc,CAAC;AAC5E,uBAAiBiD,QAAQ,GAAG,EAAH,GAAQ,KAAK,CADsC;AAE5E,sBAAgBL,EAF4D;AAG5E,uBAAiBmB,OAH2D;AAI5E,iBAAW;AAJiE,KAAD,EAK1EV,SAL0E,CAAf,EAK/C;AACbN,MAAAA,OAAO,EAAE0B,WADI;AAEbkB,MAAAA,GAAG,EAAErC,OAFQ;AAGbsC,MAAAA,IAAI,EAAE;AAHO,KAL+C,CAAvC,EASnB,eAAgB/E,KAAK,CAACC,aAAN,CAAoBiB,WAApB,EAAiC;AACnD8D,MAAAA,MAAM,EAAErC,IAAI,CAACgB,KADsC;AAEnD,uBAAiBjC,QAFkC;AAGnD,iBAAW,eAHwC;AAInDG,MAAAA,IAJmD;AAKnDiD,MAAAA,GAAG,EAAEpC,WAL8C;AAMnDqC,MAAAA,IAAI,EAAE,UAN6C;AAOnDtB,MAAAA;AAPmD,KAAjC,EAQjBY,OARiB,CATG,EAiBV,eAAgBrE,KAAK,CAACC,aAAN,CAAoBY,WAAW,CAACoE,QAAhC,EAA0C;AACrElG,MAAAA,KAAK,EAAE2E;AAD8D,KAA1C,EAE1BjC,QAAQ,IAAI,eAAgBzB,KAAK,CAACC,aAAN,CAAoBa,SAApB,EAA+B;AAC5DoE,MAAAA,MAAM,EAAE,CAACxD;AADmD,KAA/B,EAE5BD,QAF4B,CAFF,CAjBN,CAAvB;AAsBD;;AACD,SAAO,eAAgBzB,KAAK,CAACC,aAAN,CAAoBe,IAApB,EAA0BxB,aAAa,CAACL,cAAc,CAAC;AAC5E,qBAAiBiD,QAAQ,GAAG,EAAH,GAAQ,KAAK,CADsC;AAE5E,eAAW,UAFiE;AAG5E,oBAAgBL,EAH4D;AAI5E,qBAAiBmB;AAJ2D,GAAD,EAK1EV,SAL0E,CAAf,EAK/C;AACb,qBAAiBd,QADJ;AAEbQ,IAAAA,OAAO,EAAE0B,WAFI;AAGbuB,IAAAA,SAAS,EAAEjB,aAHE;AAIbY,IAAAA,GAAG,EAAErC,OAJQ;AAKbsC,IAAAA,IAAI,EAAE,UALO;AAMbtB,IAAAA;AANa,GAL+C,CAAvC,EAYnB,eAAgBzD,KAAK,CAACC,aAAN,CAAoBiB,WAApB,EAAiC;AACnD8D,IAAAA,MAAM,EAAErC,IAAI,CAACgB,KADsC;AAEnDyB,IAAAA,EAAE,EAAE,KAF+C;AAGnD,eAAW;AAHwC,GAAjC,EAIjBf,OAJiB,CAZG,EAgBV,eAAgBrE,KAAK,CAACC,aAAN,CAAoBY,WAAW,CAACoE,QAAhC,EAA0C;AACrElG,IAAAA,KAAK,EAAE2E;AAD8D,GAA1C,EAE1BjC,QAAQ,IAAI,eAAgBzB,KAAK,CAACC,aAAN,CAAoBa,SAApB,EAA+B;AAC5DY,IAAAA;AAD4D,GAA/B,EAE5BD,QAF4B,CAFF,CAhBN,CAAvB;AAqBD;;AACD,SACEH,QADF","sourcesContent":["var __defProp = Object.defineProperty;\nvar __defProps = Object.defineProperties;\nvar __getOwnPropDescs = Object.getOwnPropertyDescriptors;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nvar __spreadProps = (a, b) => __defProps(a, __getOwnPropDescs(b));\nvar __objRest = (source, exclude) => {\n  var target = {};\n  for (var prop in source)\n    if (__hasOwnProp.call(source, prop) && exclude.indexOf(prop) < 0)\n      target[prop] = source[prop];\n  if (source != null && __getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(source)) {\n      if (exclude.indexOf(prop) < 0 && __propIsEnum.call(source, prop))\n        target[prop] = source[prop];\n    }\n  return target;\n};\nimport { useId } from \"@reach/auto-id\";\nimport { ToggleArrowRightIcon } from \"@sanity/icons\";\nimport React, { createElement, useCallback, useEffect, useMemo, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport { Box, Flex, Text } from \"../../primitives\";\nimport {\n  treeItemRootStyle,\n  treeItemRootColorStyle,\n  treeItemBoxStyle\n} from \"./style\";\nimport { TreeContext } from \"./treeContext\";\nimport { TreeGroup } from \"./treeGroup\";\nimport { useTree } from \"./useTree\";\nconst Root = styled.li(treeItemRootStyle, treeItemRootColorStyle);\nconst TreeItemBox = styled(Box).attrs({ forwardedAs: \"a\" })(treeItemBoxStyle);\nconst ToggleArrowText = styled(Text)`\n  & > svg {\n    transition: transform 100ms;\n  }\n`;\nfunction TreeItem(props) {\n  const _a = props, {\n    children,\n    expanded: expandedProp = false,\n    fontSize,\n    href,\n    icon,\n    id: idProp,\n    muted,\n    onClick,\n    padding = 3,\n    selected = false,\n    space = 2,\n    text,\n    weight\n  } = _a, restProps = __objRest(_a, [\n    \"children\",\n    \"expanded\",\n    \"fontSize\",\n    \"href\",\n    \"icon\",\n    \"id\",\n    \"muted\",\n    \"onClick\",\n    \"padding\",\n    \"selected\",\n    \"space\",\n    \"text\",\n    \"weight\"\n  ]);\n  const rootRef = useRef(null);\n  const treeitemRef = useRef(null);\n  const tree = useTree();\n  const { path, registerItem, setExpanded, setFocusedElement } = tree;\n  const id = useId(idProp) || idProp;\n  const itemPath = useMemo(() => path.concat([id || \"\"]), [id, path]);\n  const itemKey = itemPath.join(\"/\");\n  const itemState = tree.state[itemKey];\n  const focused = tree.focusedElement === rootRef.current;\n  const expanded = (itemState == null ? void 0 : itemState.expanded) === void 0 ? expandedProp : (itemState == null ? void 0 : itemState.expanded) || false;\n  const tabIndex = tree.focusedElement && tree.focusedElement === rootRef.current ? 0 : -1;\n  const contextValue = useMemo(() => __spreadProps(__spreadValues({}, tree), { level: tree.level + 1, path: itemPath }), [itemPath, tree]);\n  const handleClick = useCallback((event) => {\n    if (onClick)\n      onClick(event);\n    const target = event.target;\n    if (target instanceof HTMLElement && (target.getAttribute(\"data-ui\") === \"TreeItem__box\" || target.closest('[data-ui=\"TreeItem__box\"]'))) {\n      event.stopPropagation();\n      setExpanded(itemKey, !expanded);\n      setFocusedElement(rootRef.current);\n    }\n  }, [expanded, itemKey, onClick, setExpanded, setFocusedElement]);\n  const handleKeyDown = useCallback((event) => {\n    if (focused && event.key === \"Enter\") {\n      const el = treeitemRef.current || rootRef.current;\n      el == null ? void 0 : el.click();\n    }\n  }, [focused]);\n  useEffect(() => {\n    if (!rootRef.current)\n      return;\n    return registerItem(rootRef.current, itemPath.join(\"/\"), expanded, selected);\n  }, [expanded, itemPath, registerItem, selected]);\n  const content = /* @__PURE__ */ React.createElement(Flex, {\n    padding\n  }, /* @__PURE__ */ React.createElement(Box, {\n    marginRight: space,\n    style: { visibility: icon || children ? \"visible\" : \"hidden\", pointerEvents: \"none\" }\n  }, icon && /* @__PURE__ */ React.createElement(Text, {\n    muted,\n    size: fontSize,\n    weight\n  }, createElement(icon)), !icon && /* @__PURE__ */ React.createElement(ToggleArrowText, {\n    muted,\n    size: fontSize,\n    weight\n  }, /* @__PURE__ */ React.createElement(ToggleArrowRightIcon, {\n    style: { transform: expanded ? \"rotate(90deg)\" : void 0 }\n  }))), /* @__PURE__ */ React.createElement(Box, {\n    flex: 1\n  }, /* @__PURE__ */ React.createElement(Text, {\n    muted,\n    size: fontSize,\n    textOverflow: \"ellipsis\",\n    weight\n  }, text)));\n  if (href) {\n    return /* @__PURE__ */ React.createElement(Root, __spreadProps(__spreadValues({\n      \"data-selected\": selected ? \"\" : void 0,\n      \"data-tree-id\": id,\n      \"data-tree-key\": itemKey,\n      \"data-ui\": \"TreeItem\"\n    }, restProps), {\n      onClick: handleClick,\n      ref: rootRef,\n      role: \"none\"\n    }), /* @__PURE__ */ React.createElement(TreeItemBox, {\n      $level: tree.level,\n      \"aria-expanded\": expanded,\n      \"data-ui\": \"TreeItem__box\",\n      href,\n      ref: treeitemRef,\n      role: \"treeitem\",\n      tabIndex\n    }, content), /* @__PURE__ */ React.createElement(TreeContext.Provider, {\n      value: contextValue\n    }, children && /* @__PURE__ */ React.createElement(TreeGroup, {\n      hidden: !expanded\n    }, children)));\n  }\n  return /* @__PURE__ */ React.createElement(Root, __spreadProps(__spreadValues({\n    \"data-selected\": selected ? \"\" : void 0,\n    \"data-ui\": \"TreeItem\",\n    \"data-tree-id\": id,\n    \"data-tree-key\": itemKey\n  }, restProps), {\n    \"aria-expanded\": expanded,\n    onClick: handleClick,\n    onKeyDown: handleKeyDown,\n    ref: rootRef,\n    role: \"treeitem\",\n    tabIndex\n  }), /* @__PURE__ */ React.createElement(TreeItemBox, {\n    $level: tree.level,\n    as: \"div\",\n    \"data-ui\": \"TreeItem__box\"\n  }, content), /* @__PURE__ */ React.createElement(TreeContext.Provider, {\n    value: contextValue\n  }, children && /* @__PURE__ */ React.createElement(TreeGroup, {\n    expanded\n  }, children)));\n}\nexport {\n  TreeItem\n};\n"]},"metadata":{},"sourceType":"module"}